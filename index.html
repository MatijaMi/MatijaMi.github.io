<!DOCTYPE html>

<html lang="en" style="height: 100%">
    
    <head>
    	<link rel="icon" href="icon.svg">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CR2 Decoder</title>
        <link rel="stylesheet" href="style.css">
		<script src="Scripts/DownloadFunctions.js"></script>
		<script src="Scripts/Reader.js"></script>
		<script src="Scripts/UIFunctions.js"></script>
		
        <script src="Scripts/MetaData/metaData.js"></script>
    	<script src="Scripts/MetaData/IFDFunctions.js"></script>
		<script src="Scripts/MetaData/MakerNoteFunctions.js"></script>
		<script src="Scripts/MetaData/DHTFunctions.js"></script>
		<script src="Scripts/MetaData/SOF3.js"> </script>
		<script src="Scripts/MetaData/SOS.js"></script>
		
		<script src="Scripts/Decode/decodeHandler.js"></script>
		<script src="Scripts/Decode/colorConversion.js"></script>
		<script src="Scripts/Decode/Decompress.js"></script>
		<script src="Scripts/Decode/Interpolations.js"></script>
		
		<script src="Scripts/Utils/ByteTransformations.js"></script>
		<script src="Scripts/Utils/DecodeUtils.js"></script>
		<script src="Scripts/Utils/debug.js"></script>
    </head>
    
    <body>
		
		<div class="header"> 
			<a href="index.html">Home</a>
			<a>CR2</a>
			<a>FAQ</a>
			<a>About</a>
		</div>
		
		<div class="content"> 
			
			<h1> CR2 Decoder</h1>
			<div  id="inputBox" class="inputBox">
				<input type="file" id="fileInput" name="files">
				<div class="dropzone" id="dropzone" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
					<label id="label" for="fileInput">Upload a .CR2 file</label>
				</div>
				
				<div class="left" id="left">
				<div id="info"></div>
					</div>
				
				
				<div class="right" id="right">
					
					<div class="image" id="image"></div>
					<div class="buttons">
						<button class="downloadButton" id="downloadBasic" onclick="downloadJpeg()"> Download as Jpeg</button>
						<button class="downloadButton" id="downloadBasic" onclick="downloadRaw()"> Download Raw Bytes</button>
						<button class="downloadButton" id="downloadBasic" onclick="downloadMetaData()"> Download Meta Data</button>
						
						<button class="downloadButton" id="decodeY" onclick="decodeImage(false)"> Decode as YYCbCr</button>
						<button class="downloadButton" id="decodeR" onclick="decodeImage(false)"> Decode as RGGB</button>
						<button class="downloadButton" id="decodeYY" onclick="decodeImage(false)"> Decode as YYYYCbCr</button>
						<button class="downloadButton" id="decodeRGB" onclick="decodeImage(true)"> Decode as RGB</button>
						
						<button class="downloadButton" id="dycc" onclick="downloadProcessedImage('YCC')"> Download YCbCr Data</button>
						<button class="downloadButton" id="dyycc" onclick="downloadProcessedImage('YYYYCC')"> Download YYYYCbCr Data</button>
						<button class="downloadButton" id="drggb" onclick="downloadProcessedImage('RGGB')"> Download RGGB Data</button>
						<button class="downloadButton" id="drgb" onclick="downloadProcessedImage('RGB')"> Download RGB Data</button>
					
					</div>
					<div class="pbText" id="pbText"></div>
					
					<div class="progressBar" id="progressBar">
						<div class="bar" id="bar">0.0%</div>
					</div>
					
					<img class="loading" id="loading" src="stolen.gif" alt="Loading">
			</div>
		</div>
		<div class="intro">
			<h3>What is CR2 Decoder?</h3>
			<p>CR2 Decoder is a project aimed at making working with Canon Raw 2 files easier by making the raw data that the camera collects, as well as the meta data used by the camera more accesible and easier to extract from the  .CR2 file. It also functions as a simple .CR2 to .JPEG converter for those who only need that function. Seeing as there is only so much knowledege about the .CR format that has been found out there are certain limitations as to what this tool can do and we cannot promise that it will work with every camera and every file that you choose. It is also still a work in progress so a lot of improvements are always on the way and in case you encounter any bugs or problems please do report them to our team so we can deal with them switfly and on time.
			</p>
			
			</div>
		</div>

		
		
		<script  type="text/javascript">
			
			const inputElement = document.getElementById("fileInput");
			inputElement.addEventListener("change", handleFiles, false);
			window.imageCount=0;
			//Functions used to handle file input and drag-and-drop
			function handleFiles() {
					window.fileList = this.files;
				readFile(fileList[0]);	
			}
			
			function dragOverHandler(ev) {
  				ev.preventDefault();
			}
			
			function dropHandler(ev) {
  				ev.preventDefault();

  				if (ev.dataTransfer.items) {
					readFile(ev.dataTransfer.items[0].getAsFile());
  				}
			}
		
		</script>
    </body>
</html>