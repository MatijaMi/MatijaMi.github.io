<!DOCTYPE html>

<html lang="en" style="height: 100%">
    
    <head>
		<meta charset="UTF-8">
    	<link rel="icon" href="Images/icon.svg">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>CR2 Decoder</title>
        <link rel="stylesheet" href="baseStyle.css">
        <link rel="stylesheet" href="decoderStyle.css">
		<script src="Scripts/download.js"></script>
		<script src="Scripts/reader.js"></script>
		<script src="Scripts/UI.js"></script>
		
        <script src="Scripts/MetaData/metaData.js"></script>
    	<script src="Scripts/MetaData/IFD.js"></script>
		<script src="Scripts/MetaData/MakerNote.js"></script>
		<script src="Scripts/MetaData/DHT.js"></script>
		<script src="Scripts/MetaData/SOF3.js"> </script>
		<script src="Scripts/MetaData/SOS.js"></script>
		<script src="Scripts/MetaData/versionDetection.js"></script>
		
		<script src="Scripts/Decode/decode.js"></script>
		<script src="Scripts/Decode/colorConversion.js"></script>
		<script src="Scripts/Decode/decompress.js"></script>
		<script src="Scripts/Decode/interpolations.js"></script>
		
		<script src="Scripts/byteTransformations.js"></script>
		<script src="Scripts/Decode/decodeUtils.js"></script>
    </head>
    
    <body>
		
	<div class="header"> 
			<a href="index.html">Home</a>
			<div class="dropdown">
				<a href="Websites/cr2.html">CR2</a>
				<div class="dropdownContent">
					<a href="Websites/cr2.html">Intro</a>
    				<a href="Websites/ifds.html">IFDs</a>
    				<a href="Websites/rawdata.html">Raw Data</a>
    				<a href="Websites/decoding.html">Decoding</a>
				</div>
			</div>
			<a href="Websites/tutorial.html">Tutorial</a>
			<a href="Websites/About.html">About</a>
		
		</div>
		
		<div class="content"> 

			<image class="logoImage" src="Images/logo.svg"></image>
			
			<div  id="inputBox" class="inputBox">
				<input type="file" id="fileInput" name="files">
				<div class="dropzone" id="dropzone" ondrop="dropHandler(event);" ondragover="dragOverHandler(event);">
					<label id="label" class="uploadLabel" for="fileInput">Upload a .CR2 file</label>
				</div>
				
				<div class="left" id="left">
					<div id="info"></div>
				</div>
				
				<div class="mid" id="mid">
					
					<div class="image" id="image"></div>
					<div class="buttons">
						<div style="width: 100%"><button class="mainButtons" id="downloadBasic" onclick="downloadJpeg()"> Download as Jpeg</button>
							<button class="mainButtons" id="downloadBasic" onclick="downloadMetaData()"> Download Meta Data</button></div>
						<div style="width: 100%"><button class="mainButtons" id="decodeRGB" onclick="decodeImage(true)"> Decode .CR2</button>
							<button class="mainButtons" id="drgb" onclick="downloadProcessedImage('RGB')"> Download Decoded Raw</button></div>
					</div>
					<div class="pbText" id="pbText"></div>
					<div class="progressBar" id="progressBar">
						<div class="bar" id="bar">0.0%</div>
					</div>
					<img class="loading" id="loading" src="Images/stolen.gif" alt="Loading">
			</div>
							
				<div class="right" id="right">
					<u>Additional Options</u>
  					<div class="checkBoxDiv"> <label class="checkLabels" >Color Balancing</label> 
						  	<input type="checkbox" class="checkBox" onclick="switchColorBalance()"></div>
					<div class="checkBoxDiv">  <label  class="checkLabels" >Black Level Adjustment</label>
						  	<input type="checkbox" class="checkBox" onclick="switchBlackLevels();"></div> 
					<div class="checkBoxDiv">  <label  class="checkLabels" >Crop Sensor Borders</label> 
							<input type="checkbox" class="checkBox" onclick="switchCropMode()"></div>
					<div class="checkBoxDiv">  <label  class="checkLabels" >Hue-Based Interpolation</label> 
							<input type="checkbox" class="checkBox" onclick="switchInterpolationMode()"></div>
					<div class="checkBoxDiv">  <label  class="checkLabels">24-bit Color</label> 
							<input type="checkbox" class="checkBox" onclick="switchColorMode()"></div>
				</div>
		</div>
		<div class="intro">
			<h3>What is CR2 Decoder?</h3>
			<p>CR2 Decoder is a project aimed at making working with Canon Raw 2 files easier by making the raw data that the camera collects, as well as the most important meta data used by the camera more accesible and easier to extract from the  .CR2 file. It also functions as a simple .CR2 to .JPEG converter for those who only need that function. Seeing as there is only so much knowledge about the .CR format that has been found out there are certain limitations as to what this tool can do and we cannot promise that it will work with every camera and every file that you choose. It is still a work in progress so a lot of improvements are always on the way and in case you encounter any bugs or problems please do report them to our team so we can deal with them switfly and on time.
			</p>
			
			</div>
		</div>
	
		
		<script  type="text/javascript">
			function switchBlackLevels(){
				blackLevels=!blackLevels;
			}
			function switchColorBalance(){
				colorBalance=!colorBalance;
			}
			function switchColorMode(){
				colorMode=!colorMode;
			}
			function switchInterpolationMode(){
				interpolationMode=!interpolationMode;
			}
			function switchCropMode(){
				cropMode=!cropMode;
			}
		
			const inputElement = document.getElementById("fileInput");
			inputElement.addEventListener("change", handleFiles, false);
			imageCount=0;
			//Functions used to handle file input and drag-and-drop
			function handleFiles() {
				let fileList = this.files;
				if(fileList.length>0){
					fileName=fileList[0].name;
					readFile(fileList[0]);
				}
			}
			
			function dragOverHandler(ev) {
  				ev.preventDefault();
			}
			
			function dropHandler(ev) {
  				ev.preventDefault();
  				if (ev.dataTransfer.items) {
					readFile(ev.dataTransfer.items[0].getAsFile());
  				}
			}		
		</script>
		
		
    </body>
</html>